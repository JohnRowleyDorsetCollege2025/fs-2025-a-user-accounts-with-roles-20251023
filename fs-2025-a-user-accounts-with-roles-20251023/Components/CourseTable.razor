@using fs_user_accounts.Data
@using AppApp.Domain
@using System.Globalization

@if (courses is null)
{
    <p><em>Loading courses...</em></p>
}
else if (!courses.Any())
{
    <p class="text-muted">No courses found.</p>
}
else
{
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>Title</th>
                <th>Instructor</th>
                <th class="text-center">Duration (weeks)</th>
                <th class="text-center">Level</th>
                <th class="text-end">Price</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var c in courses)
            {
                <tr>
                    <td>@c.Title</td>
                    <td>@c.Instructor</td>
                    <td class="text-center">@c.DurationWeeks</td>
                    <td class="text-center">@c.Level</td>
                    <td class="text-end">@c.Price.ToString("C", CultureInfo.CurrentCulture)</td>
                </tr>
            }
        </tbody>
    </table>
}

@code {
    [Parameter]
    public int Count { get; set; } = 50; // default to 50 to match Patients factory default

    private List<Course>? courses;

    protected override void OnInitialized()
    {
        // Load courses when the component initializes using the existing MockData factory.
        courses = MockData.Courses(Count);
    }
}